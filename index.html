<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ‚úÖ Verificaci√≥n de cuentas -->
  <meta name="google-adsense-account" content="ca-pub-7859862485920488">
  <meta name="monetag" content="def1720bd9357fa6141e82ebd3c840b1">

  <title>Cine Plus TV üì∫</title>

  <!-- ‚úÖ Google AdSense (Auto Ads) -->
  <!-- üî∏ Pega aqu√≠ tu script oficial de AdSense si no se inserta autom√°ticamente -->
  <!-- Ejemplo: <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7859862485920488" crossorigin="anonymous"></script> -->

  <!-- ‚úÖ Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2N41SSDHYQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-2N41SSDHYQ');
  </script>

  <!-- ‚úÖ AMP Auto Ads -->
  <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"></script>

  <!-- ‚úÖ HubSpot -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/50933862.js"></script>

  <!-- ‚úÖ Monetag (placeholder: inserta aqu√≠ tu script oficial) -->
  <!-- üî∏ Ejemplo: <script src="https://monetag.example/script.js" data-zone="10480432"></script> -->

  <style>
    body { margin:0; background:#000; color:#fff; font-family:Arial, Helvetica, sans-serif }
    header { background:#111; padding:15px; position:sticky; top:0; z-index:10 }
    .logo { color:#e50914; font-size:24px; font-weight:bold; text-align:center }

    #movies {
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
      gap:15px;
      padding:20px
    }
    .card {
      background:#1c1c1c; border-radius:10px; cursor:pointer; transition:.2s;
    }
    .card:hover { transform:scale(1.05); }
    .card img { width:100%; height:230px; object-fit:cover; border-radius:10px 10px 0 0 }
    .card p { text-align:center; padding:8px; font-size:14px }

    #tv {
      position:fixed;
      inset:0;
      background:#000;
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      z-index:9999
    }
    #player { width:90%; max-width:900px; height:500px }

    .controls { margin-top:10px; display:flex; gap:10px; }
    .controls button {
      background:#e50914; border:none; padding:10px 20px; color:#fff;
      border-radius:6px; font-size:16px; cursor:pointer
    }

    .ad-block { text-align:center; margin:25px auto; }
  </style>
</head>

<body>

  <!-- ‚úÖ AMP Auto Ads -->
  <amp-auto-ads type="adsense" data-ad-client="ca-pub-7859862485920488"></amp-auto-ads>

  <header>
    <div class="logo">üé¨ Cine Plus TV</div>
  </header>

  <!-- üîù Anuncio superior -->
  <div class="ad-block">
    <!-- Pega aqu√≠ tu bloque de anuncio superior de AdSense -->
  </div>

  <!-- üé• Contenedor de pel√≠culas -->
  <div id="movies"></div>
  <div id="sentinel"></div>

  <!-- üì∫ Reproductor -->
  <div id="tv">
    <div id="player"></div>
    <div class="controls">
      <button onclick="skip()">‚è≠ Siguiente</button>
    </div>

    <!-- üî∏ Anuncio dentro del reproductor -->
    <div class="ad-block">
      <!-- Pega aqu√≠ tu bloque de anuncio dentro del video -->
    </div>
  </div>

  <!-- üîª Anuncio inferior -->
  <div class="ad-block">
    <!-- Pega aqu√≠ tu bloque de anuncio inferior de AdSense -->
  </div>

  <!-- üéûÔ∏è Script principal -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    const OMDB_KEY = "d58f0933";
    const TMDB_KEY = "a75df45f5957e88b88043e6e9558b941";
    let playlist = [], page = 1, index = -1, player;
    const introVideoId = "8ZcmTl_1ER8";

    function onYouTubeIframeAPIReady() {
      player = new YT.Player("player", {
        playerVars: { autoplay:1, controls:1, rel:0, mute:1, playsinline:1 },
        events: {
          onReady: () => play(introVideoId),
          onStateChange: e => {
            if (e.data === 0) {
              if (index === -1) { index = 0; playTrailer(playlist[index]); }
              else next();
            }
          },
          onError: () => next()
        }
      });
    }

    function play(id){ player.loadVideoById(id); }
    function skip(){ next(); }

    async function next(){
      index++;
      if(index >= playlist.length) await load();
      if(playlist[index]) playTrailer(playlist[index]);
    }

    async function playTrailer(imdb){
      try{
        const res = await fetch(`https://api.themoviedb.org/3/find/${imdb}?api_key=${TMDB_KEY}&external_source=imdb_id`);
        const data = await res.json();
        const movie = data.movie_results[0];
        if(!movie) return next();

        const vids = await fetch(`https://api.themoviedb.org/3/movie/${movie.id}/videos?api_key=${TMDB_KEY}`);
        const vd = await vids.json();
        const trailer = vd.results.find(x=>x.site==="YouTube" && ["Trailer","Clip","Featurette"].includes(x.type));
        if(trailer) play(trailer.key); else next();
      }catch{ next(); }
    }

    async function load(){
      try{
        const res = await fetch(`https://www.omdbapi.com/?apikey=${OMDB_KEY}&s=movie&type=movie&page=${page}`);
        const data = await res.json();
        if(data.Response==="True"){
          data.Search.forEach((m,i)=>{
            playlist.push(m.imdbID);
            const card=document.createElement("div");
            card.className="card";
            card.innerHTML=`<img src="${m.Poster}" alt="${m.Title}"><p>${m.Title}</p>`;
            card.onclick=()=>{ index=playlist.indexOf(m.imdbID); playTrailer(m.imdbID); };
            movies.appendChild(card);

            // üß© Bloques publicitarios entre scrolls
            if((playlist.length+i)%10===0){
              const ad=document.createElement("div");
              ad.className="ad-block";
              ad.innerHTML=`<!-- Inserta aqu√≠ un bloque AdSense autom√°tico -->`;
              movies.appendChild(ad);
            }
          });
          page++;
        }
      }catch(e){ console.error("Error cargando pel√≠culas:", e); }
    }

    new IntersectionObserver(e=>e[0].isIntersecting&&load(),{threshold:0.1}).observe(sentinel);
    window.onload=async()=>{ await load(); };
  </script>

  <!-- ‚úÖ HubSpot Cookie Config -->
  <button type="button" id="hs_show_banner_button"
    style="background-color:#425b76;border:1px solid #425b76;border-radius:3px;padding:10px 16px;color:#fff;">
    Configuraci√≥n de cookies
  </button>
  <script>
    document.getElementById("hs_show_banner_button").onclick = function() {
      var _hsp = window._hsp = window._hsp || [];
      _hsp.push(['showBanner']);
    };
  </script>
</body>
</html>
